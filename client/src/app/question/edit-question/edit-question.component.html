<form
  *ngIf="model"
  #askQuestionForm="ngForm"
  (ngSubmit)="askQuestion()"
  autocomplete="off"
>
  <div class="row justify-content-center">
    <div class="col-xl-5 col-lg-7 col-md-10 col-sm-12">
      <div class="card p-3">
        <div class="aligns-items-center">
          <h5 class="semi-bold-font text-center my-3">{{ pageTitle }}</h5>
          <hr class="seperator mx-auto" />

          <div>
            <div *ngIf="model && !isNew" style="margin-left: 36%;">
              <ng-toggle
                
                [color]="{
                  unchecked: '#dcdcdc',
                  checked: '#0099cc'
                }"
                [value]="model.isActive"
                [(ngModel)]="model.isActive"
                [switchColor]="{
                  checked: '#fff',
                  unchecked: '#fff'
                }"
                id="is-active"
                name="isActive"
              ></ng-toggle>
              <label
                for="is-active"
                style="margin-left: 10px; font-family: Poppins !important;"
              >
                {{ model.isActive ? 'Active' : 'Not Active' }}
              </label>
            </div>
          </div>
        </div>
        <div class="form-group mt-5">
          <label for="header">Title</label>
          <div>
            <input
              *ngIf="model"
              type="text"
              class="form-control"
              name="header"
              [(ngModel)]="model.header"
              id='header'
            />
          </div>
        </div>

        <div class="mt-4"></div>

        <div>
          <label for="body">Body</label>
          <span style="opacity: 0.5; font-size: 14px;">(optional)</span>
        </div>

        <div>
          <textarea
            type="textarea"
            class="form-control"
            name="body"
            [(ngModel)]="model.body"
            rows="3"
            id='body'
          ></textarea>
        </div>

        <div>
          <app-photo-editor
            [addPhotoUrlExtension]="'questions/add-photo/'"
            [onUploadSuccess]="onUploadPhotoSuccess"
            [onDeletePhoto]="deletePhoto"
          ></app-photo-editor>
          <img *ngIf="model.photo" src="{{model.photo.Url}}" class="card-img-top img-thumbnail" style="max-width: 100%;" />

          <div class="form-group mt-4">
            <label for="aboutMe">Tags</label>
            <tag-input name="tags" [(ngModel)]="model.tags"
            [secondaryPlaceholder]="'Choose or Add a Tag'">
              <tag-input-dropdown
                [autocompleteItems]="allTags"
                [showDropdownIfEmpty]="true"
              ></tag-input-dropdown>
            </tag-input>
          </div>

          <div class="form-group mt-4">
            <label for="communities">Community</label>
            <tag-input
              name="communities"
              [(ngModel)]="model.communities"
              id="communities"
              [maxItems]="1"              
              [onlyFromAutocomplete]="true"
              [placeholder]="community"
              [secondaryPlaceholder]="'Choose a Community'"
            >
              <tag-input-dropdown
                [autocompleteItems]="allCommunities"
                [showDropdownIfEmpty]="true"
                [placeholder]="community"
              ></tag-input-dropdown>
            </tag-input>
          </div>

          <div class="form-group mt-4">
            <label class="form-check-label" for="howLong">
              How long do you think it should take to solve your question (in
              minutes)?
            </label>

            <div class="mt-4">
              <button
                [class.checked-length]="model.length == 1"
                class="btn btn-secondary"
                style="margin-left: 9%;"
                type='button'
                (click)="setLength(1)"
              >
                Up to 5
              </button>
              <button
                [class.checked-length]="model.length == 2"
                class="btn btn-secondary"
                style="margin-left: 20px;"
                type='button'
                (click)="setLength(2)"
              >
                Up to 15
              </button>
              <button
                [class.checked-length]="model.length == 3"
                class="btn btn-secondary"
                style="margin-left: 20px;"
                type='button'
                (click)="setLength(3)"
              >
                More Than 15
              </button>
            </div>
          </div>
          <div class="mt-3"></div>

          <div
            [class.d-flex]="isEditMode"
            [class.flex-column]="isEditMode"
            class="form-group text-center mt-5"
          >
            <button class="btn btn-success mr-2" type="submit">Publish</button>
            <button
              *ngIf="!isEditMode"
              class="btn btn-danger"
              style="margin-left: 15px;"
              (click)="cancel()"
            >
              Cancel
            </button>
          </div>
        </div>

        <!-- 
        <div
        *ngIf="community.isCurrentUserMember; else joinTemp"
        class="d-flex justify-content-between "
      >
        <ng-template #joinTemp class="align-text-bottom">
            <div class="d-flex flex-column">
              <button type="button" class="btn btn-primary" (click)="join()">
                Join
              </button>
            </div>
          </ng-template> -->

        <div *ngIf="!isNew">
          <ul class="nav nav-tabs mt-3">
            <li class="nav-item">
              <a
                class="nav-link"
                aria-current="page"
                (click)="toggleDisplayComments()"
                [ngClass]="{ active: !shouldDisplayComments }"
              >
                Comments
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                tabindex="-1"
                (click)="toggleDisplayComments()"
                [ngClass]="{ active: shouldDisplayComments }"
              >
                Offers
              </a>
            </li>
          </ul>

          <div [hidden]="shouldDisplayComments">
            <h4>Comments</h4>
            <app-comments
              *ngIf="model && !isNew"
              [comments]="model.comments"
              [questionId]="id"
            ></app-comments>
          </div>

          <div [hidden]="!shouldDisplayComments">
            <h4>Offers</h4>
            <app-offers
              *ngIf="model && !isNew"
              [offers]="model.offers"
              [questionId]="id"
            ></app-offers>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
