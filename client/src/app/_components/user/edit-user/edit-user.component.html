<div class="container mt-5">
  <div class="row aligns-items-center">
    <div class="text-center"><h3>Settings</h3></div>
  </div>
</div>

<div
  *ngIf="member"
  
  autocomplete="off"
  class="my-3 row d-flex justify-content-center container"
  style="margin-left: 0px;"
>
  <div class="row justify-content-center">
    <div class="col-xl-5 col-lg-7 col-md-10 col-sm-12">
      <div class="card p-3">
        <div class="mb-3 align-bottom mx-auto text-center">
          <img
            src="{{ member.photoUrl || './assets/user.png' }}"
            alt="{{ member.username }}"
            class="card-img-top img-thumbnail"
            style="width: 100px; height: 100px;"
            class="rounded-circle"
          />
          <app-photo-editor
            [addPhotoUrlExtension]="'users/add-photo'"
            [onUploadSuccess]="onUploadPhotoSuccess"
            [onDeletePhoto]="onDeletePhoto"
          ></app-photo-editor>
        </div>
        <div class="card-body">
          <div>
            <div class="form-group">
              <label for="username">Username</label>
              <input
                type="text"
                class="form-control"
                name="username"
                [(ngModel)]="member.username"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="email">Email address</label>
            <input
              type="email"
              class="form-control"
              name="email"
              id="email"
              [(ngModel)]="member.email"
            />
            <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
          </div>
          <div class="form-group">
            <label for="title">Title</label>
            <input
              type="text"
              class="form-control"
              name="title"
              id="title"
              [(ngModel)]="member.title"
              maxlength="50"
            />
          </div>
          <div class="form-group">
            <label for="aboutMe">About Me</label>
            <textarea
              type="textarea"
              class="form-control"
              name="aboutMe"
              id="aboutMe"
              rows='5'
              style="resize: none;"
              [(ngModel)]="member.aboutMe"></textarea>
            
          </div>

          <div class="form-group mt-4">
            <label for="aboutMe">Tags</label>
            <tag-input
              name="tags"
              [(ngModel)]="member.tags"
              [theme]="'bootstrap'"
            >
              <tag-input-dropdown
                [autocompleteItems]="allTags"
                [showDropdownIfEmpty]="true"
                [maxItems]="20"        
              ></tag-input-dropdown>
            </tag-input>
          </div>

          <!-- <div class="form-group mt-4">
            <label for="aboutMe">Communities</label>
            <tag-input
              name="communities"
              [(ngModel)]="member.communities"
              [theme]="'bootstrap'"
              [onlyFromAutocomplete]="true"
              [secondaryPlaceholder]="'Choose a Community'"
            >
              <tag-input-dropdown
                [autocompleteItems]="allCommunities"
                [showDropdownIfEmpty]="true"
                [placeholder]="community"
              ></tag-input-dropdown>
            </tag-input>
          </div> -->

          <div class="form-group mt-5">
            <label>
              <strong>Notify me whenver..</strong>
            </label>

            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                name="questionAskedOnMyTags"
                [(ngModel)]="member.emailPrefrence.questionAskedOnMyTags"
              />
              <label class="form-check-label" for="flexCheckChecked">
                A question is asked according to my tags
              </label>
            </div>

            <!-- <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                name="onlyNotifyOnCommunityQuestionAsked"
                [(ngModel)]="member.emailPrefrence.onlyNotifyOnCommunityQuestionAsked"
              />
              <label class="form-check-label" for="flexCheckChecked">
                Only notify me when a question is asked in a community I'm a
                member of
              </label>
            </div> -->

            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                name="myQuestionReceivedNewOffer"
                [(ngModel)]="member.emailPrefrence.myQuestionReceivedNewOffer"
              />
              <label class="form-check-label" for="flexCheckChecked">
                A question I asked gets a new offer
              </label>
            </div>

            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                name="myQuestionReceivedNewComment"
                [(ngModel)]="member.emailPrefrence.myQuestionReceivedNewComment"
              />
              <label class="form-check-label" for="flexCheckChecked">
                A question I asked gets a new comment
              </label>
            </div>

            <div class="d-flex justify-content-between mt-5">
              <button class="btn btn-success mr-2 card-button" (click)='editMember()'>
                Save
              </button>
              <button
                class="btn btn-warning mr-2 card-button"
                [routerLink]="['/users', member.username]"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
